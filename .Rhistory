calc_anomaly(baseline_range = c(1991, 2020))
plot_anomaly(sst_anom, value_col = anomaly,
comp_value_col = anomaly, lang = "fr",
y_label = "Anomalies de la TSM (°C)",
base_size = 16)
pkgload::dev_help('plot_anomaly')
comp_data <- EA.data |>
dplyr::filter(variable == "t.deep", EAR %in% c(1, 5)) |>
dplyr::group_by(EAR) |>
calc_anomaly(baseline_range = c(1991, 2020))
plot_anomaly(data = subset(comp_data, EAR == 5),
value_col = anomaly,
var_col = EAR,
composite_data = subset(comp_data, EAR == 1),
comp_value_col = anomaly)
pkgload::dev_help('plot_anomaly')
calanus_anom <- EA.data |>
dplyr::filter(variable == "calanus.finmarchicus.annual", EAR == 5) |>
calc_anomaly(baseline_range = c(1999, 2015))
plot_anomaly(data = calanus_anom,
value_col = anomaly,
show_scorecard = FALSE,
show_composite = FALSE,
y_label = "Standardized Anomaly")
devtools::load_all()
sst_anom <- EA.data |>
dplyr::filter(variable == "sst.month10", EAR == 5) |>
calc_anomaly(baseline_range = c(1991, 2020))
plot_anomaly(sst_anom, value_col = anomaly,
comp_value_col = anomaly, lang = "fr",
y_label = "Anomalies de la TSM (°C)",
base_size = 16)
sst_anom <- EA.data |>
dplyr::filter(variable == "sst.month10", EAR == 5) |>
calc_anomaly(baseline_range = c(1991, 2020))
plot_anomaly(sst_anom, value_col = anomaly,
comp_value_col = anomaly, lang = "fr",
y_label = "Anomalies de la TSM (°C)",
base_size = 20)
sst_anom <- EA.data |>
dplyr::filter(variable == "sst.month10", EAR == 3) |>
calc_anomaly(baseline_range = c(1991, 2020))
plot_anomaly(sst_anom, value_col = anomaly,
comp_value_col = anomaly, lang = "fr",
y_label = "Anomalies de la TSM (°C)",
base_size = 20)
pkgload::dev_help('plot_anomaly')
comp_data <- EA.data |>
dplyr::filter(variable == "sst.month9", EAR %in% c(1, 5)) |>
dplyr::group_by(EAR) |>
calc_anomaly(baseline_range = c(1991, 2020))
pkgload::dev_help('plot_anomaly')
devtools::load_all()
depth_data <- EA.data |>
dplyr::filter(variable == "t.deep", EAR == 5) |>
dplyr::group_by(depth) |>
calc_anomaly(baseline_range = c(1991, 2020))
sst_anom <- EA.data |>
dplyr::filter(variable == "sst.month10", EAR == 3) |>
calc_anomaly(baseline_range = c(1991, 2020))
plot_anomaly(sst_anom, value_col = anomaly,
comp_value_col = anomaly, lang = "fr",
y_label = "Anomalies de la TSM (°C)",
base_size = 20)
devtools::load_all()
sst_anom <- EA.data |>
dplyr::filter(variable == "sst.month10", EAR == 3) |>
calc_anomaly(baseline_range = c(1991, 2020))
plot_anomaly(sst_anom, value_col = anomaly,
comp_value_col = anomaly, lang = "fr",
y_label = "Anomalies de la TSM (°C)",
base_size = 20)
devtools::load_all()
sst_anom <- EA.data |>
dplyr::filter(variable == "sst.month10", EAR == 3) |>
calc_anomaly(baseline_range = c(1991, 2020))
plot_anomaly(sst_anom, value_col = anomaly,
comp_value_col = anomaly, lang = "fr",
y_label = "Anomalies de la TSM (°C)",
base_size = 20)
devtools::load_all()
sst_anom <- EA.data |>
dplyr::filter(variable == "sst.month10", EAR == 3) |>
calc_anomaly(baseline_range = c(1991, 2020))
plot_anomaly(sst_anom, value_col = anomaly,
comp_value_col = anomaly, lang = "fr",
y_label = "Anomalies de la TSM (°C)",
base_size = 20)
devtools::load_all()
sst_anom <- EA.data |>
dplyr::filter(variable == "sst.month10", EAR == 3) |>
calc_anomaly(baseline_range = c(1991, 2020))
plot_anomaly(sst_anom, value_col = anomaly,
comp_value_col = anomaly, lang = "fr",
y_label = "Anomalies de la TSM (°C)",
base_size = 20)
sst_anom <- EA.data |>
dplyr::filter(variable == "sst.month10", EAR == 3) |>
calc_anomaly(baseline_range = c(1991, 2020))
plot_anomaly(sst_anom, value_col = anomaly,
comp_value_col = anomaly, lang = "fr",
y_label = "Anomalies de la TSM (°C)", x_breaks_interval = 5
base_size = 20)
sst_anom <- EA.data |>
dplyr::filter(variable == "sst.month10", EAR == 3) |>
calc_anomaly(baseline_range = c(1991, 2020))
plot_anomaly(sst_anom, value_col = anomaly,
comp_value_col = anomaly, lang = "fr",
y_label = "Anomalies de la TSM (°C)", x_breaks_interval = 5,
base_size = 20)
sst_anom <- EA.data |>
dplyr::filter(variable == "sst.month10", EAR == 3) |>
calc_anomaly(baseline_range = c(1991, 2020))
plot_anomaly(sst_anom, value_col = anomaly,
comp_value_col = anomaly, lang = "fr",
y_label = "Anomalies de la TSM (°C)", x_breaks_interval = 2,
base_size = 20)
devtools::load_all()
sst_anom <- EA.data |>
dplyr::filter(variable == "sst.month10", EAR == 3) |>
calc_anomaly(baseline_range = c(1991, 2020))
plot_anomaly(sst_anom, value_col = anomaly,
comp_value_col = anomaly, lang = "fr",
y_label = "Anomalies de la TSM (°C)",
base_size = 20)
sst_anom <- EA.data |>
dplyr::filter(variable == "sst.month10", EAR == 3) |>
calc_anomaly(baseline_range = c(1991, 2020))
plot_anomaly(sst_anom, value_col = anomaly,
comp_value_col = anomaly, lang = "fr",
y_label = "Anomalies de la TSM (°C)", x_breaks_interval = 2,
base_size = 20)
sst_anom <- EA.data |>
dplyr::filter(variable == "sst.month10", EAR == 3) |>
calc_anomaly(baseline_range = c(1991, 2020))
test_plot<-plot_anomaly(sst_anom, value_col = anomaly,
comp_value_col = anomaly, lang = "fr",
y_label = "Anomalies de la TSM (°C)", x_breaks_interval = 2,
base_size = 20)
ggsave(
filename = "anomaly_test_plot.png",
plot = test_plot,
width = 10,       # Width in inches
height = 7,       # Height in inches
dpi = 300,        # High resolution
bg = "white"      # Ensures background isn't transparent
)
ggsave(
filename = "anomaly_test_plot.png",
plot = test_plot,
width = 15,       # Width in inches
height = 7,       # Height in inches
dpi = 300,        # High resolution
bg = "white"      # Ensures background isn't transparent
)
ggsave(
filename = "anomaly_test_plot.png",
plot = test_plot,
width = 18,       # Width in inches
height = 7,       # Height in inches
dpi = 300,        # High resolution
bg = "white"      # Ensures background isn't transparent
)
sst_anom <- EA.data |>
dplyr::filter(variable == "sst.month10", EAR == 3) |>
calc_anomaly(baseline_range = c(1991, 2020))
test_plot<-plot_anomaly(sst_anom, value_col = anomaly,
comp_value_col = anomaly, lang = "fr",
y_label = "Anomalies de la TSM (°C)", x_breaks_interval = 2,
base_size = 18)
ggsave(
filename = "anomaly_test_plot.png",
plot = test_plot,
width = 18,       # Width in inches
height = 7,       # Height in inches
dpi = 300,        # High resolution
bg = "white"      # Ensures background isn't transparent
)
devtools::load_all()
sst_anom <- EA.data |>
dplyr::filter(variable == "sst.month10", EAR == 3) |>
calc_anomaly(baseline_range = c(1991, 2020))
plot_anomaly(sst_anom, value_col = anomaly,
comp_value_col = anomaly, lang = "fr",
y_label = "Anomalies de la TSM (°C)", x_breaks_interval = 2,
base_size = 20)
sst_anom <- EA.data |>
dplyr::filter(variable == "sst.month10", EAR == 3) |>
calc_anomaly(baseline_range = c(1991, 2020))
test_plot<-plot_anomaly(sst_anom, value_col = anomaly,
comp_value_col = anomaly, lang = "fr",
y_label = "Anomalies de la TSM (°C)", x_breaks_interval = 2,
base_size = 18)
ggsave(
filename = "anomaly_test_plot.png",
plot = test_plot,
width = 18,       # Width in inches
height = 7,       # Height in inches
dpi = 300,        # High resolution
bg = "white"      # Ensures background isn't transparent
)
load("C:/Users/BurbankJ/AppData/Local/Microsoft/Windows/INetCache/Content.Outlook/30O8TW1C/EA.extra.data.rda")
library(ggplot2)
library(gslea)
# Define the 30-color ramp based on your specific transition points
custom_ramp <- colorRampPalette(c("#b2182b", "#ffffbf", "#1a9850"))(30)
ggplot(EA.extra.data$stock.status, aes(x = Year, y = Stock, fill = status.LRP)) +
geom_tile(color = "white", linewidth = 0.5) +
geom_contour(aes(z = status.LRP), breaks = 1, color = "black",
linewidth = 0.8, linetype = "dashed") +
scale_fill_gradientn(
colors = custom_ramp,
values = scales::rescale(
c(0, 0.9, 1.1, 1.9, 2.1, 2.5),
from = c(0, 2.5)
),
limits = c(0, 2.5),
na.value = "grey80",
name = "Status/LRP",
oob = scales::squish,
breaks = c(0, 1, 2, 2.5),
labels = c("0", "1.0 (LRP)", "2.0", "2.5+"),
guide = guide_colorbar(nbin = 30, barheight = 10)
) +
scale_x_continuous(breaks = seq(1970, 2025, by = 5), expand = c(0, 0)) +
scale_y_discrete(expand = c(0, 0)) +
labs(
title = "Stock Status Relative to Limit Reference Point (LRP)",
x = "Year",
y = "Stock"
) +
theme_minimal(base_size = 12) +
theme(
axis.text.x = element_text(angle = 45, hjust = 1),
panel.grid = element_blank(),
legend.position = "right",
plot.title = element_text(face = "bold", hjust = 0.5)
)
View(EA.extra.data)
View(EA.extra.data[["stock.status"]])
pkgload::dev_help('plot_stock_status')
devtools::load_all()
plot_stock_status(lang = "en")
library(ggplot2)
library(gslea)
# Define the 30-color ramp based on your specific transition points
custom_ramp <- colorRampPalette(c("#b2182b", "#ffffbf", "#1a9850"))(30)
ggplot(EA.extra.data$stock.status, aes(x = Year, y = Stock, fill = status.LRP)) +
geom_tile(color = "white", linewidth = 0.5) +
geom_contour(aes(z = status.LRP), breaks = 1, color = "black",
linewidth = 0.8, linetype = "dashed") +
scale_fill_gradientn(
colors = custom_ramp,
values = scales::rescale(
c(0, 0.9, 1.1, 1.9, 2.1, 2.5),
from = c(0, 2.5)
),
limits = c(0, 2.5),
na.value = "grey80",
name = "Status/LRP",
oob = scales::squish,
breaks = c(0, 1, 2, 2.5),
labels = c("0", "1.0 (LRP)", "2.0", "2.5+"),
guide = guide_colorbar(nbin = 30, barheight = 10)
) +
scale_x_continuous(breaks = seq(1970, 2025, by = 5), expand = c(0, 0)) +
scale_y_discrete(expand = c(0, 0)) +
labs(
title = "Stock Status Relative to Limit Reference Point (LRP)",
x = "Year",
y = "Stock"
) +
theme_minimal(base_size = 12) +
theme(
axis.text.x = element_text(angle = 45, hjust = 1),
panel.grid = element_blank(),
legend.position = "right",
plot.title = element_text(face = "bold", hjust = 0.5)
)
warnings()
pkgload::dev_help('plot_stock_status')
devtools::load_all()
plot_stock_status(lang = "en")
devtools::load_all()
plot_stock_status(lang = "en")
plot_stock_status(lang = "en", show_title = FALSE)
plot_stock_status(lang = "fr", year_range=c(1990,2025), show_title = FALSE)
plot_stock_status(lang = "fr", year_range=c(1990,2025), show_title = FALSE, base_size=20)
library(rosettafish)
devtools::load_all()
plot_stock_status(lang = "fr", year_range=c(1990,2025), show_title = FALSE, base_size=20)
devtools::load_all()
plot_stock_status(lang = "fr", year_range=c(1990,2025), show_title = FALSE, base_size=20)
devtools::load_all()
plot_stock_status(lang = "fr", year_range=c(1990,2025), show_title = FALSE, base_size=20)
devtools::load_all()
plot_stock_status(lang = "fr", year_range=c(1990,2025), show_title = FALSE, base_size=20)
devtools::load_all()
plot_stock_status(lang = "fr", year_range=c(1990,2025), show_title = FALSE, base_size=20)
devtools::load_all()
plot_stock_status(lang = "fr", year_range=c(1990,2025), show_title = FALSE, base_size=20)
devtools::load_all()
plot_stock_status(lang = "fr", year_range=c(1990,2025), show_title = FALSE, base_size=20)
devtools::load_all()
plot_stock_status(lang = "fr", year_range=c(1990,2025), show_title = FALSE, base_size=20)
devtools::load_all()
plot_stock_status(lang = "fr", year_range=c(1990,2025), show_title = FALSE, base_size=20)
devtools::load_all()
devtools::load_all()
plot_stock_status(lang = "fr", year_range=c(1990,2025), show_title = FALSE, base_size=20)
devtools::load_all()
plot_stock_status(lang = "fr", year_range=c(1990,2025), show_title = FALSE, base_size=20)
plot_stock_status(lang = "en", show_title = FALSE)
devtools::load_all()
plot_stock_status(lang = "en", show_title = FALSE)
plot_stock_status(lang = "fr", show_title = FALSE)
devtools::load_all()
plot_stock_status(lang = "fr", show_title = FALSE)
devtools::load_all()
plot_stock_status(lang = "fr", show_title = FALSE)
devtools::load_all()
pkgload::dev_help('plot_gslea_temperature')
my_regions <- list("Northern GSL" = 1:4, "Southern GSL" = c(5, 6, 50))
plot_gslea_temperature(EA.data, sst.month10,
groups = my_regions,
year_range = c(2000, 2023),
facet_scales = "fixed",
col_palette = c("Northern GSL" = "royalblue",
"Southern GSL" = "firebrick"))
pkgload::dev_help('plot_gslea_ice')
plot_gslea_ice(EA.data, ice.duration,
year_range = c(2000, 2020),
groups = list("Northern" = 1:4, "Southern" = 5:6),
lang = "fr",
facet_scales = "fixed",
col_palette = c("black", "blue"))
pkgload::dev_help('plot_gslea_ice')
my_regions <- list("Northern GSL" = 1:4, "Southern GSL" = c(5, 6, 50))
plot_gslea_temperature(EA.data, sst.month10,
groups = my_regions,
year_range = c(2000, 2023),
facet_scales = "fixed",
col_palette = c("Northern GSL" = "royalblue",
"Southern GSL" = "firebrick"))
plot_gslea_ice(EA.data, ice.duration,
year_range = c(2000, 2020),
groups = list("Northern" = 1:4, "Southern" = 5:6),
lang = "fr",
facet_scales = "fixed",
col_palette = c("black", "blue"))
pkgload::dev_help('plot_gslea_plankton')
plot_gslea_plankton(EA.data, dw2_t.annual, EARs = 5)
devtools::load_all()
plot_gslea_ice(EA.data, ice.duration,
year_range = c(2000, 2020),
groups = list("Northern" = 1:4, "Southern" = 5:6),
lang = "fr",
facet_scales = "fixed",
col_palette = c("black", "blue"))
devtools::load_all()
plot_gslea_ice(EA.data, ice.duration,
year_range = c(2000, 2020),
groups = list("Northern" = 1:4, "Southern" = 5:6),
lang = "fr",
facet_scales = "fixed",
col_palette = c("black", "blue"))
plot_gslea_plankton(EA.data, dw2_t.annual, EARs = 5)
devtools::load_all()
plot_gslea_ice(EA.data, ice.duration,
year_range = c(2000, 2020),
groups = list("Northern" = 1:4, "Southern" = 5:6),
lang = "fr",
facet_scales = "fixed",
col_palette = c("black", "blue"))
devtools::load_all()
plot_gslea_ice(EA.data, ice.duration,
year_range = c(2000, 2020),
groups = list("Northern" = 1:4, "Southern" = 5:6),
lang = "fr",
facet_scales = "fixed",
col_palette = c("black", "blue"))
pkgload::dev_help('plot_gslea_plankton')
devtools::load_all()
plot_gslea_plankton(EA.data, dw2_t.annual, EARs = 5)
region_list <- list("Northern GSL" = 1:4, "Southern GSL" = c(5, 6, 50))
plot_gslea_plankton(data = EA.data,
var = calanus.finmarchicus.annual,
groups = region_list,
year_range = c(2005, 2023),
lang = "en",
col_palette = c("Northern GSL" = "darkgreen",
"Southern GSL" = "orange"))
region_list <- list("Northern GSL" = 1:4, "Southern GSL" = c(5, 6, 50))
plot_gslea_plankton(data = EA.data,
var = calanus.finmarchicus.annual,
groups = region_list,
year_range = c(2005, 2023),
lang = "en", facet_scales = "fixed",
col_palette = c("Northern GSL" = "darkgreen",
"Southern GSL" = "orange"))
status.with.respect.to.LRP <- read.csv("C:/Users/BurbankJ/OneDrive - DFO-MPO/glsea_Burbank/status with respect to LRP.csv")
View(status.with.respect.to.LRP)
library(forcats) # Use fct_inorder to keep the rows as sorted in the data
ggplot(df, aes(x = Year, y =  fct_inorder(Stock), fill = status.LRP)) +
geom_tile(color = "white", linewidth = 0.5) +
geom_contour(aes(z = status.LRP), breaks = 1, color = "black",
linewidth = 0.8, linetype = "dashed") +
scale_fill_distiller(
palette = "RdYlGn",
direction = 1,
limits = c(0, 2),
na.value = "grey80",
name = "Status/LRP",
oob = scales::squish,
breaks = c(0, 0.5, 1, 1.5, 2),
labels = c("0", "0.5", "1.0 (LRP)", "1.5", "2.0+")
) +
scale_x_continuous(breaks = seq(1955, 2025, by = 5), expand = c(0, 0)) +
scale_y_discrete(expand = c(0, 0)) +
labs(
title = "Stock Status Relative to Limit Reference Point (LRP)",
x = "Year",
y = "Stock"
) +
theme_minimal(base_size = 12) +
theme(
axis.text.x = element_text(angle = 45, hjust = 1),
panel.grid = element_blank(),
legend.position = "right",
plot.title = element_text(face = "bold", hjust = 0.5)
)
View(status.with.respect.to.LRP)
df0<-status.with.respect.to.LRP
df <- df0[order(df0$Group,df0$Area,df0$Stock,df0$Year, decreasing = T),]
ggplot(df, aes(x = Year, y =  fct_inorder(Stock), fill = status.LRP)) +
geom_tile(color = "white", linewidth = 0.5) +
geom_contour(aes(z = status.LRP), breaks = 1, color = "black",
linewidth = 0.8, linetype = "dashed") +
scale_fill_distiller(
palette = "RdYlGn",
direction = 1,
limits = c(0, 2),
na.value = "grey80",
name = "Status/LRP",
oob = scales::squish,
breaks = c(0, 0.5, 1, 1.5, 2),
labels = c("0", "0.5", "1.0 (LRP)", "1.5", "2.0+")
) +
scale_x_continuous(breaks = seq(1955, 2025, by = 5), expand = c(0, 0)) +
scale_y_discrete(expand = c(0, 0)) +
labs(
title = "Stock Status Relative to Limit Reference Point (LRP)",
x = "Year",
y = "Stock"
) +
theme_minimal(base_size = 12) +
theme(
axis.text.x = element_text(angle = 45, hjust = 1),
panel.grid = element_blank(),
legend.position = "right",
plot.title = element_text(face = "bold", hjust = 0.5)
)
plot_stock_status(df, lang = 'en')
pkgload::dev_help('plot_stock_status_heatmap')
devtools::load_all()
plot_stock_status_heatmap(lang = "en")
plot_stock_status_heatmap(df, lang = "en")
devtools::load_all()
plot_stock_status_heatmap(df, lang = "en")
devtools::load_all()
plot_stock_status_heatmap(df, lang = "en")
plot_stock_status_heatmap(df, lang = "fr")
plot_stock_status_heatmap(df, lang = "en")
plot_stock_status_heatmap(df, lang = "fr")
devtools::load_all()
plot_stock_status_heatmap(df, lang = "fr")
devtools::load_all()
devtools::load_all()
plot_stock_status_heatmap(df, lang = "fr")
plot_stock_status_heatmap(df, lang = "en")
plot_stock_status(df, lang = "fr")
View(status.with.respect.to.LRP)
library(readxl)
status_with_respect_to_LRP <- read_excel("C:/Users/BurbankJ/OneDrive - DFO-MPO/glsea_Burbank/status with respect to LRP.xlsx")
View(status_with_respect_to_LRP)
df0<-status_with_respect_to_LRP
df <- df0[order(df0$Group,df0$Area,df0$Stock,df0$Year, decreasing = T),]
plot_stock_status(df, lang = "fr")
plot_stock_status_heatmap(df, lang = "fr")
plot_stock_status(df, lang = "fr")
devtools::load_all()
plot_stock_status(df, lang = "fr")
plot_stock_status(df)
plot_stock_status_heatmap(df, lang = "fr")
plot_stock_status(df)
plot_stock_status_heatmap(df, lang = "fr")
plot_stock_status_heatmap(df)
plot_stock_status_heatmap(df, lang = "fr")
plot_stock_status_heatmap(df)
hm<-plot_stock_status_heatmap(df)
hmf<-plot_stock_status_heatmap(df, lang = "fr")
ggsave('Status_Heat_Map_EN.png', width = 10, height = 6)
plot_stock_status_heatmap(df, lang = "fr")
ggsave('Status_Heat_Map_FR.png', width = 10, height = 6)
plot_stock_status_heatmap(df)
ggsave('Status_Heat_Map_EN.png', width = 10, height = 6)
plot_gslea_plankton(EA.data, start, EARs = 1:8, lang = "fr")
devtools::load_all()
plot_gslea_plankton(EA.data, start, EARs = 1:8, lang = "fr")
ggsave('Status_Heat_Map_EN.png', width = 10, height = 6)
plot_stock_status_heatmap(df)
plot_stock_status_heatmap(df, lang = "fr")
